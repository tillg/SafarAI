# Tools Clickable

Users can browse and manually execute available tools from the UI.

## Feature

Add a "Tools" button in the header (top right of chat column). Clicking it opens a popover listing all available tools:

- Each tool shows its name (as a button) and description
- **No-param tools**: Click to execute immediately
- **Param tools** (getImage, searchOnPage, openInNewTab): Show inline text field + execute button

Results and errors appear in the Event Timeline (auto-expand the new entry).

## Architecture

**Direct execution** (no LLM involvement):

```text
User clicks tool → ToolExecutor.execute(ToolCall) → Result logged to Event Timeline
```

- Construct `ToolCall` with generated UUID for the `id` field
- Raw JSON output displayed in event log
- Reuses existing ToolExecutor and event logging infrastructure

## UI Design

**Popover** anchored to "Tools" button:

- Lightweight, native macOS feel
- While executing: loading overlay blocks interaction
- Auto-closes after execution completes

**Tool list layout**:

```
┌─────────────────────────────────────┐
│ getPageText              [Run]      │
│ Extract text from page              │
├─────────────────────────────────────┤
│ searchOnPage             [Run]      │
│ Search for text on page             │
│ [________________] (query field)    │
├─────────────────────────────────────┤
│ getImage                 [Run]      │
│ Get image by selector               │
│ [________________] (selector field) │
└─────────────────────────────────────┘
```

## Implementation

1. **ToolsPopoverView.swift** - New view for the tools popover
   - Lists tools from `Tool.allTools`
   - Inline TextField for param tools (`selector`, `query`, `url`)
   - Loading overlay while executing; auto-closes on completion

2. **ContentView.swift** - Add "Tools" button to header
   - Wrench icon with `.popover()` modifier

3. **EventCardView.swift** - Add `initiallyExpanded` parameter
   - Custom init sets `@State isExpanded` from parameter

4. **ExtensionService.swift** - Track expanded events
   - `expandedEventIDs: Set<UUID>` for auto-expand state
   - `markEventForExpansion(_:)` called after manual tool execution
